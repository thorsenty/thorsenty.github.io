<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>QUnit, JavaScript Unit Testing, and TDD</title>
        <link rel="shortcut icon" type="image/png" href="/assets/images/favicon.png"/>
        <link rel="styleheet" href="/styles/vendor/syntax.css"/>
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/css/bootstrap.min.css"/>
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/css/bootstrap-theme.min.css"/>
        <link rel="stylesheet" href="/styles/dist/Thorsent.css"/>
    </head>
    <body>
      <input id="page-url" type="hidden" value="/blog/2014/03/26/qunit/">
      <nav class="navbar navbar-default navbar-inverse navbar-fixed-top">
        <div class="container">
          <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
              <span class="sr-only">Toggle navigation</span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/">Thorsent</a>
          </div>
          <div id="navbar" class="navbar-collapse collapse">
            <ul class="nav navbar-nav navbar-right">
              <li><a href="/">Home</a></li>
              <li class="dropdown">
                <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">Projects <span class="caret"></span></a>
                <ul class="dropdown-menu" role="menu">
                  <li><a href="/planning-poker/">Planning Poker</a></li>
                  <li><a href="/ulti-ipsum/">Ulti Ipsum</a></li>
                </ul>
              </li>
              <li><a href="/blog/">Blog</a></li>
            </ul>
          </div><!--/.nav-collapse -->
        </div>
      </nav>
      <div class="content">
        <div class="container">
    <div class="post feature card card-2">
        <div class="card-content">
        	<h2>QUnit, JavaScript Unit Testing, and TDD</h2>
        	<p class="meta">Posted on 26 Mar 2014 by Ty Thorsen</p>
        	<p>JavaScript unit testing is probably not the sexiest subject imaginable, but as I start to build out thorsent it seems like one worth talking about.</p>

<!--more-->

<p>Professionally, for the past six months, I have been working with a team of up to a dozen developers to build a new member portal for a large <a href="http://en.wikipedia.org/wiki/Pharmacy_benefit_management">PBM</a> using the <a href="http://www.adobe.com/solutions/web-experience-management.html">Adobe Experience Manager</a> (CQ5) platform. AEM is a content management system, and by the nature of WCMs, most of the business logic for the components we build is in JavaScript client libraries. Over time, as we rushed to build out functionality and the site became more complex, we realized that we had created some 40,000 lines of interrelated JS and had no good way to test any of it.</p>

<p>After lengthy discussion, my team decided that it would be valuable to implement a unit testing framework for our JavaScript in order to ensure stability going forward. We decided to use <a href="https://qunitjs.com">QUnit</a> to build out this framework because our application made heavy use of jQuery (QUnit is/was part of the jQuery project and is used to test jQuery itself). To make a long story short, refactoring existing JS to make it unit-testable is a time consuming, and less than enjoyable task. We&#39;ve made a good start on increasing our test coverage, but still have a long way to go.</p>

<p>The moral of that story is that if you&#39;re writing a JavaScript application, or rather an application that utilizes any JavaScript at all, it is worth implementing a unit testing framework from day zero. If <a href="http://www.agiledata.org/essays/tdd.html">test-driven development</a> is your cup of tea, I would highly encourage that as well.</p>

<p>With this in mind, I have created a QUnit framework for thorsent. It&#39;s easy to get started. All you need is a JS file, a CSS file, and two particular div elements on a test page and you&#39;re well on your way. The QUnit <a href="http://api.qunitjs.com">API documentation</a> and <a href="http://qunitjs.com/cookbook/">cookbook</a> do a good job of laying out and explaining everything else you can do from there. As you can see below, I&#39;ve written my first test which covers a toggle function for the mobile navigation drawer.</p>

<p><img src="/assets/images/qunit-initial.png" alt="QUnit Screen" title="QUnit Screen"></p>

<p>I intend to use this framework to do TDD for all future JavaScript development on this site. As easy as it would be to take shortcuts working as a one man team, it is important to commit to best practices such as TDD. Regardless of your team size, being disciplined in these practices will result in cleaner code that has fewer defects and is easier to maintain. </p>

        	<div id="disqus_thread"></div>
            <script type="text/javascript">
                var disqus_shortname = 'thorsent';
                var disqus_identifier = document.getElementById("page-url").value;

                (function() {
                    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
                    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
                })();
            </script>
            <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
            <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
        </div>
    </div>
</div>
      </div>
      <div class="footer">
        <div class="container">
          <p>&copy;2014 Ty Thorsen, all rights reserved.</p>
        </div>
      </div>
      <script src="//ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
      <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/js/bootstrap.min.js"></script>
      <script type="text/javascript" src="/scripts/dist/Thorsent.min.js"></script>
      <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
        ga('create', 'UA-49818813-1', 'thorsent.com');
        ga('send', 'pageview');
      </script>
    </body>
</html>
